<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>
    
      使用 Travis 部署 Hexo 博客
    
  </title>
  
    <link rel="icon" href="/favicon.png">
  
  <link href="https://cdn.bootcss.com/normalize/8.0.1/normalize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/index.css">
  <script src="/js/index.js"></script>

  
    <link href="https://cdn.bootcss.com/highlight.js/9.13.1/styles/github.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/highlight.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/ada.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/cpp.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/css.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/dart.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/dockerfile.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/elixir.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/erlang.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/go.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/haskell.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/ini.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/java.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/javascript.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/json.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/julia.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/kotlin.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/python.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/protobuf.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/r.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/lisp.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/llvm.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/lua.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/makefile.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.0/languages/markdown.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/ruby.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/rust.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/scala.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/scss.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/shell.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/sql.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/swift.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/tex.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/typescript.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/verilog.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/vim.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/xml.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/languages/yaml.min.js"></script>
  
</head>

  <body>
    <aside id="menu">
  <header>
    <div class="wrapper">
      <button class="close"><i class="fas fa-times"></i></button>
      <h1 class="title">WHITE</h1>
    </div>
  </header>
  <div class="wrapper">
    <div class="description">
      Hello Goodbye & Hello
    </div>
    <nav>
      <ul>
        
          
            <li><a href="/">Home</a></li>
          
        
          
            <li><a href="/tags">Tags</a></li>
          
        
          
            <li><a href="/about">About</a></li>
          
        
          
            <li><a href="/atom.xml">Rss</a></li>
          
        
      </ul>
    </nav>
    <ul class="social">
      
        <li>
          <a target="__bank" href="https://github.com/helbing">
            <i class="fab fa-github"></i>
          </a>
        </li>
      
        <li>
          <a target="__bank" href="mailto:helbingxxx@gmail.com">
            <i class="fas fa-at"></i>
          </a>
        </li>
      
    </ul>
    <footer>
      &copy;
      <a target="__bank" href="https://github.com/helbing">helbing</a> -
      Powered by <a target="__bank" href="https://hexo.io">Hexo</a> & <a target="__bank" href="https://github.com/helbing/hexo-theme-white">White</a>.
    </footer>
  </div>
</aside>

    <header class="fixed">
  <div class="wrapper">
    <button id="menu-btn"><i class="fas fa-bars"></i></button>
    <h1 class="title">WHITE</h1>
    <button id="search-btn"><i class="fas fa-search"></i></button>
  </div>
</header>

    <aside id="search">
  <div class="wrapper">
    <header>
      <input type="text" id="search-input" placeholder="Input And Enter To Search">
      <button class="close"><i class="fas fa-times"></i></button>
    </header>
    <div id="search-result"></div>
    <div class="back-to-top">
  <button><i class="fas fa-angle-up"></i>TOP</button>
</div>

  </div>
</aside>

    <div class="container">
      <main>
        
          

<article class="article">
  <div class="cover left-item" style="background-image:url(https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190208165724.png);">
    <img src="https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190208165724.png">
  </div>
  <div class="content right-item">
    <div class="wrapper">
      <time>FEBRUARY 4, 2019</time>
      <h2 class="title">
        <a href="/2019/02/04/deploy-hexo-blog-with-travis/">使用 Travis 部署 Hexo 博客</a>
      </h2>
      <div class="description">
        相信很多人都有自己的静态博客，但是部署方式可能不是采用自动化部署的方式。像我之前就是通过手动编译和部署的方式来部署我的博客到VPS上，Travis 是一款免费的自动化部署工具，接下来我将介绍如何用 Travis 来部署静态博客
      </div>
      <ul class="tags">
        
          
            <li><a href="/tags/travis/">#travis</a></li>
          
        
          
            <li><a href="/tags/git/">#git</a></li>
          
        
          
            <li><a href="/tags/hexo/">#hexo</a></li>
          
        
      </ul>
    </div>
  </div>
</article>

          <div id="article">
            <p>首先我是默认看这篇博文的你是已经有自己的静态博客了，只是还缺少一套可以自动化部署博客的手段。因为我的电脑是 macOS 操作系统，所以博文中的操作都是基本 macOS 操作系统的，Windows 操作系统上不一定适用</p>
<h2 id="注册登录-Travis"><a href="#注册登录-Travis" class="headerlink" title="注册登录 Travis"></a>注册登录 Travis</h2><p>打开 Chrome 浏览器，进入 Travis 的<a href="https://travis-ci.com" target="_blank" rel="noopener">官网</a>，记住是 <code>.com</code> 结尾的，而不是 <code>.org</code> 结尾的。接下来凭你的直觉去添加项目</p>
<p><img src="https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190204090319.png" alt></p>
<h2 id="安装-Travis"><a href="#安装-Travis" class="headerlink" title="安装 Travis"></a>安装 Travis</h2><p>在安装 Travis 前首先我们得重新安装 Ruby 环境，macOS 自带的 Ruby 环境太老了</p>
<pre><code class="bash">brew install ruby
</code></pre>
<p>添加环境变量，由于我用的是 zsh ，所以我是在 <code>~/.zshrc</code> 中添加环境变量</p>
<pre><code class="bash"># ruby
export PATH=&quot;/usr/local/opt/ruby/bin:$PATH&quot;

# gem
export PATH=&quot;$PATH:`gem env gemdir`/bin&quot;
</code></pre>
<p>重新加载配置</p>
<pre><code class="bash">source ~/.zshrc
</code></pre>
<p>进入正戏，开始安装 Travis</p>
<pre><code class="bash">gem install travis
</code></pre>
<p>执行下 <code>travis</code>，如果有反应说明就是安装完成了</p>
<h2 id="登录-Travis"><a href="#登录-Travis" class="headerlink" title="登录 Travis"></a>登录 Travis</h2><p>到你的博客目录执行</p>
<pre><code class="bash">travis login --com --auto
</code></pre>
<p>按照它的提示进行输入即可登录成功</p>
<h2 id="申请-GITHUB-TOKEN"><a href="#申请-GITHUB-TOKEN" class="headerlink" title="申请 GITHUB_TOKEN"></a>申请 GITHUB_TOKEN</h2><p>打开 Github 的 <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">Personal access tokens</a>，然后点击 <code>Generate new token</code> 按钮</p>
<p><img src="https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190204091334.png" alt></p>
<p>权限部分我们只需要勾选 <code>repo</code></p>
<p>为了防止 GITHUB TOKEN 泄露，我们添加一个环境变量。在你的 Travis 项目中对应的 Setting (More options -&gt; Settings) 页面添加环境变量</p>
<p><img src="https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190204092112.png" alt></p>
<h2 id="配置-travis-yml"><a href="#配置-travis-yml" class="headerlink" title="配置 .travis.yml"></a>配置 .travis.yml</h2><p>在你的博客根目录新建 <code>.travis.yml</code></p>
<pre><code class="yaml">language: node_js
sudo: required
node_js: stable
cache:
  yarn: true
  directories:
    - node_modules
branchs:
  only:
    - master
before_script:
  - curl -o- -L https://yarnpkg.com/install.sh | bash
  - export PATH=&quot;$HOME/.yarn/bin:$PATH&quot;
  - yarn install
  - yarn global add hexo-cli
script:
  - hexo clean
  - hexo generate
# 部署方式为 github page
# master 分支有提交的话触发 Travis 自动部署
# 编译完成后，将 public/ 目录下的代码提交到仓库的 gh-pages 分支
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  on:
    branch: master
  target-branch: gh-pages
  local-dir: public/
  verbose: true
</code></pre>
<p>之后当你在 master 分支提交代码后，就会自动触发部署了</p>
<h2 id="配置自定义域名"><a href="#配置自定义域名" class="headerlink" title="配置自定义域名"></a>配置自定义域名</h2><p>Github page 提供自定义域名配置，打开你的博客仓库的的 Settings 页面进行配置</p>
<p><img src="https://tuchuang-1253782374.cos.ap-guangzhou.myqcloud.com/20190208001910.png" alt></p>
<p>然后在博客根目录的 <code>source</code> 目录下添加一个 <code>CNAME</code> 文件，然后写入你的域名</p>
<pre><code class="bash">blog.helbing.cn
</code></pre>
<p>不用担心 HTTPS 证书的问题，只要你勾选了 <code>Enforce HTTPS</code>，Github 会自动帮你到 <a href="https://letsencrypt.org/" target="_blank" rel="noopener">letsencrypt</a> 那里申请免费的 HTTPS 证书</p>

          </div>
          
          
          <ul class="paginate">
  <li>
    <a href="javascript:void(0)"><i class="fas fa-arrow-left"></i>&nbsp;PREV</a>
  </li>
  
  <li>
    <a href="/2018/11/03/package-auto-discovery/">NEXT&nbsp;<i class="fas fa-arrow-right"></i></a>
  </li>
</ul>

          
            <div id="disqus_thread"></div>
            <script>
              var disqus_config = function () {
                this.page.url = "https://blog.helbing.cn/2019/02/04/deploy-hexo-blog-with-travis/";
                this.page.identifier = "https://blog.helbing.cn/2019/02/04/deploy-hexo-blog-with-travis/";
              };
              (function() {
                var d = document, s = d.createElement('script');
                s.src = "https://blog-helbing-cn.disqus.com/embed.js";
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          
          <div class="back-to-top">
  <button><i class="fas fa-angle-up"></i>TOP</button>
</div>

        
      </main>
    </div>
  </body>
</html>
